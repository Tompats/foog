---
import BaseLayout from "../layouts/BaseLayout.astro";
import SectionHeader from "../components/SectionHeader.astro";
import { withBase } from "../utils/url";

const benefits = [
  "Μαθήματα σκι και ορειβασίας με έμπειρους συνοδούς και τμήματα που χωρίζονται ανά εμπειρία για ασφάλεια.",
  "Παροχή εξοπλισμού (ski, snowboard, μπατόν, μπότες, κράνος) από το απόθεμα του Συλλόγου όπου χρειάζεται.",
  "Συμμετοχή σε πεζοπορίες, ορειβασίες, ποδηλατικές διαδρομές νυχτερινές πορείες.",
  "Προσκλήσεις σε καθαρισμούς, δεντροφυτεύσεις και εκδρομές.",
];

const steps = [
  "Συμπλήρωσε την αίτηση μέλους και βοήθησέ μας να καταλάβουμε την εμπειρία σου στη φύση.",
  "Κατέβαλε την ετήσια συνδρομή των 10€ που κρατά τον εξοπλισμό και τις δράσεις σε λειτουργία.",
  "Παρακολούθησε την ενημέρωση ασφάλειας και γνώρισε τους συνοδούς πριν από την πρώτη εξόρμηση.",
  "Δήλωσε συμμετοχή σε εξορμήσεις ή περιβαλλοντικές δράσεις και συνδέσου με την κοινότητα.",
];

const impactStats = [
  {
    label: "Ενεργά μέλη",
    value: 82,
    suffix: "+",
    description: "συμμετέχουν κάθε σεζόν σε δράσεις",
  },
  {
    label: "Χειμερινές εξορμήσεις",
    value: 28,
    suffix: "/έτος",
    description: "σε Πίνδο, Βόρα και Βέρμιο",
  },
  {
    label: "Προπονητές & συνοδοί",
    value: 14,
    suffix: "+",
    description: "πιστοποιημένοι εθελοντές",
  },
  {
    label: "Ώρες εθελοντισμού",
    value: 320,
    suffix: "+",
    description: "σε καθαρισμούς και δεντροφυτεύσεις",
  },
];
---

<BaseLayout
  title="Γίνε μέλος"
  description="Γίνε μέλος του Φ.Ο.Ο.Γ. και απόλαυσε εκπαίδευση, mentoring και αλπικές περιπέτειες."
>
  <section class="section-padding">
    <SectionHeader
      eyebrow="Μέλος"
      title="Γίνε μέλος"
      subtitle="Ανοιχτό σε σκιέρ, αναρριχητές, πεζοπόρους και νέους ορειβάτες"
    />
    <div class="grid gap-10 lg:grid-cols-2">
      <div class="glass-panel shimmer-hover p-8 space-y-5">
        <h3 class="text-2xl font-semibold text-brand-rocky">
          Γιατί να έρθεις στον Φ.Ο.Ο.Γ.;
        </h3>
        <ul class="space-y-3 text-brand-mist">
          {
            benefits.map((benefit) => (
              <li class="flex items-start gap-3">
                <span class="mt-1 h-2 w-2 rounded-full bg-brand-terracotta" />
                <span>{benefit}</span>
              </li>
            ))
          }
        </ul>
        <div class="mt-6">
          <h4 class="text-xl font-semibold text-brand-rocky">
            Ετήσια συνδρομή
          </h4>
          <div class="mt-4 grid gap-4">
            <div
              class="rounded-2xl border border-brand-river/80 bg-brand-river/70 p-4"
            >
              <p class="text-sm uppercase tracking-[0.3em] text-brand-cloud/80">
                Ενεργό μέλος
              </p>
              <p class="text-3xl font-bold text-brand-rocky">
                10€<span class="text-base font-normal text-brand-mist">
                  / έτος</span
                >
              </p>
              <p class="text-sm text-brand-cloud/80">
                Ένα μόνο ποσό για όλα τα μέλη που εξασφαλίζει συμμετοχή σε
                δράσεις, ενημερώσεις και πρόσβαση στον εξοπλισμό του Συλλόγου.
              </p>
            </div>
            <p class="text-xs text-brand-mist">
              Η προαιρετική οικονομική ενίσχυση καταγράφεται κατά την εγγραφή
              και κατευθύνεται στα παιδικά τμήματα σκι, τις δεντροφυτεύσεις και
              την συντήρηση του συλλόγου.
            </p>
          </div>
        </div>
      </div>
      <div class="glass-panel shimmer-hover p-8 space-y-6">
        <h3 class="text-2xl font-semibold text-brand-rocky">Βήματα εγγραφής</h3>
        <ol class="space-y-4">
          {
            steps.map((step, index) => (
              <li class="flex gap-4">
                <span class="flex h-10 w-10 items-center justify-center rounded-full bg-brand-moss/20 text-brand-pine font-semibold">
                  {index + 1}
                </span>
                <p class="text-brand-rocky">{step}</p>
              </li>
            ))
          }
        </ol>
        <div
          class="rounded-2xl border border-brand-moss/50 bg-brand-moss/15 p-6 text-center"
        >
          <p class="text-brand-rocky">Έτοιμος/η για νέες κορυφές;</p>
          <a
            href={withBase("/contact")}
            class="mt-4 inline-flex items-center justify-center rounded-full bg-brand-terracotta px-6 py-3 font-semibold text-brand-cloud shadow-lg shadow-brand-terracotta/40 transition hover:scale-105 hover:text-brand-cloud"
          >
            Επικοινώνησε με την ομάδα μελών
          </a>
        </div>
      </div>
    </div>
  </section>
  <section class="section-padding pt-0">
    <div class="glass-panel shimmer-hover px-8 py-10 space-y-8">
      <div class="flex flex-wrap items-start justify-between gap-6">
        <div>
          <p class="text-xs uppercase tracking-[0.45em] text-brand-mist">
            Δύναμη κοινότητας
          </p>
          <h3 class="mt-2 text-3xl font-semibold text-brand-rocky heading-font">
            Μαζί μεγαλώνουμε
          </h3>
        </div>
        <p class="max-w-xl text-brand-mist">
          Οι αριθμοί κρατούν ζωντανή την ιστορία μας: κάθε νέα εγγραφή σημαίνει
          περισσότερους συνοδούς, πιο ασφαλείς εξορμήσεις και μεγαλύτερο αποτύπωμα
          προσφοράς στο βουνό.
        </p>
      </div>
      <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-4">
        {
          impactStats.map((stat) => (
            <div
              class="shimmer-hover rounded-2xl border border-brand-river/25 bg-brand-cloud/80 p-6 text-center shadow-brand-river/10 shadow-lg"
            >
              <p class="text-xs uppercase tracking-[0.35em] text-brand-mist">
                {stat.label}
              </p>
              <p class="mt-3 text-4xl font-bold text-brand-rocky heading-font">
                <span
                  data-stat-value
                  data-target={stat.value}
                  aria-live="polite"
                >
                  0
                </span>
                {stat.suffix && (
                  <span class="ml-1 text-2xl text-brand-mist">{stat.suffix}</span>
                )}
              </p>
              <p class="mt-3 text-sm text-brand-mist">{stat.description}</p>
            </div>
          ))
        }
      </div>
    </div>
  </section>
  <script is:inline>
    (() => {
      const statElements = document.querySelectorAll('[data-stat-value]');
      if (!statElements.length) return;

      const easeOutCubic = (t) => 1 - Math.pow(1 - t, 3);

      const animateValue = (el) => {
        const target = Number(el.dataset.target ?? 0);
        const duration = 1600;
        const start = performance.now();

        const tick = (now) => {
          const progress = Math.min((now - start) / duration, 1);
          const eased = easeOutCubic(progress);
          const current = Math.round(target * eased);
          el.textContent = current.toLocaleString('el-GR');
          if (progress < 1) requestAnimationFrame(tick);
        };

        requestAnimationFrame(tick);
      };

      const observer = new IntersectionObserver(
        (entries, obs) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              animateValue(entry.target);
              obs.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.4, rootMargin: '0px 0px -10% 0px' }
      );

      statElements.forEach((el) => observer.observe(el));
    })();
  </script>
</BaseLayout>
