---
import BaseLayout from '../layouts/BaseLayout.astro';
import TripCard from '../components/TripCard.astro';
import SectionHeader from '../components/SectionHeader.astro';
import { trips } from '../data/trips';

const upcomingTrips = [...trips]
  .filter((trip) => trip.status === 'upcoming')
  .sort((a, b) => new Date(a.startDate).getTime() - new Date(b.startDate).getTime())
  .slice(0, 4);

const latestReports = [...trips]
  .filter((trip) => trip.status === 'past')
  .sort((a, b) => new Date(b.startDate).getTime() - new Date(a.startDate).getTime())
  .slice(0, 3);

const features = [
  {
    title: 'Ασφάλεια με χαμόγελο',
    body: 'IFMGA οδηγοί, playful drills και πρακτική σε πραγματικό χιόνι κρατούν τα χαμόγελα μεγάλα και τους κινδύνους μικρούς.',
    icon: 'shield'
  },
  {
    title: 'Εποχές γεμάτες χρώμα',
    body: 'Από καλοκαιρινά bivouac μέχρι σκι του ηλιοστασίου, το ημερολόγιο μας είναι μια παλέτα περιπέτειας.',
    icon: 'seasons'
  },
  {
    title: 'Στρατόπεδα περιπέτειας',
    body: 'Mini expeds, σχολές σχοινιού και βραδιές χαρτογράφησης σε καλύβες με ζεστή σοκολάτα.',
    icon: 'compass'
  },
  {
    title: 'Κοινότητα χωρίς όρια',
    body: 'Affinity ομάδες, youth stewards και οικογένειες που γεμίζουν τα μονοπάτια με γέλια.',
    icon: 'community'
  }
];

const heroGallery = [
  {
    src: 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&fit=crop&w=1600&q=70',
    alt: 'Ορειβάτες σε μικτή διαδρομή με ανατολή',
    caption: 'Alpine start στον Όλυμπο'
  },
  {
    src: 'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1600&q=70',
    alt: 'Παρέα κατασκηνώνει δίπλα σε λίμνη στο λυκόφως',
    caption: 'Βραδινό bivouac στην Τύμφη'
  },
  {
    src: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=1600&q=70',
    alt: 'Πεζοπόροι σε δάσος με χρυσαφένιο φως',
    caption: 'Φθινοπωρινή πορεία στη Βάλια Κάλντα'
  },
  {
    src: 'https://images.unsplash.com/photo-1454496522488-7a8e488e8606?auto=format&fit=crop&w=1600&q=70',
    alt: 'Σκιέρ κατεβαίνει πλαγιά με πούδρα',
    caption: 'Πούδρα στην Βασιλίτσα'
  }
];
---
<BaseLayout>
  <section class="section-padding pt-10">
    <div class="glass-panel px-8 py-14 lg:px-12 lg:py-20 overflow-hidden relative">
      <div class="absolute inset-y-0 right-0 w-1/2 opacity-30 pointer-events-none hidden lg:block">
        <svg viewBox="0 0 400 400" class="w-full h-full" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 360L120 210L200 290L320 150L400 220V400H0Z" fill="url(#grad)" />
          <defs>
            <linearGradient id="grad" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0%" stop-color="#A7C957" stop-opacity="0.6" />
              <stop offset="100%" stop-color="#E26D5A" stop-opacity="0.4" />
            </linearGradient>
          </defs>
        </svg>
      </div>
      <p class="text-sm uppercase tracking-[0.3em] text-brand-pine">Φ.Ο.Ο.Γ · Φυσιολατρικός Ορειβατικός Όμιλος Γιαννιτσών</p>
      <h1 class="mt-6 text-4xl sm:text-5xl lg:text-6xl font-semibold text-brand-rocky heading-font max-w-3xl">
        Κάμπινγκ, σχοινιά και γέλια σε κάθε κορυφή.
      </h1>
      <p class="mt-6 text-lg text-brand-mist max-w-2xl">
        Ξεκινήσαμε ως παρέα εξερευνητών και συνεχίζουμε να σχεδιάζουμε ταξίδια που μυρίζουν έλατο,
        καραμέλα και υψόμετρο. Αν αγαπάς τα χιονοπέδιλα όσο και τη φωτιά στο καταφύγιο, είσαι δικός μας άνθρωπος.
      </p>
      <div class="mt-10 flex flex-wrap gap-4">
        <a
          href="/trips"
          class="inline-flex items-center justify-center rounded-full bg-brand-terracotta px-8 py-3 text-base font-semibold text-brand-cloud shadow-lg shadow-brand-terracotta/40 transition hover:scale-105 hover:text-brand-cloud"
        >
          Δες τις επόμενες εξορμήσεις
        </a>
        <a
          href="/join"
          class="inline-flex items-center justify-center rounded-full border border-brand-pine/30 px-8 py-3 text-base font-semibold text-brand-pine hover:border-brand-terracotta hover:text-brand-terracotta transition"
        >
          Γίνε μέλος
        </a>
      </div>
      <div class="mt-8 grid gap-4 sm:grid-cols-3 text-center">
        <div class="rounded-2xl bg-brand-cloud/70 py-4 px-2 shadow-sm">
          <p class="text-3xl font-bold text-brand-pine heading-font">120+</p>
          <p class="text-xs uppercase tracking-[0.3em] text-brand-mist">Εξορμήσεις/έτος</p>
        </div>
        <div class="rounded-2xl bg-brand-cloud/70 py-4 px-2 shadow-sm">
          <p class="text-3xl font-bold text-brand-terracotta heading-font">48</p>
          <p class="text-xs uppercase tracking-[0.3em] text-brand-mist">Μέντορες</p>
        </div>
        <div class="rounded-2xl bg-brand-cloud/70 py-4 px-2 shadow-sm">
          <p class="text-3xl font-bold text-brand-moss heading-font">∞</p>
          <p class="text-xs uppercase tracking-[0.3em] text-brand-mist">Ιστορίες φωτιάς</p>
        </div>
      </div>
      <div class="mt-12 space-y-4">
        <div class="flex flex-wrap items-center justify-between gap-4">
          <div>
            <p class="text-xs uppercase tracking-[0.3em] text-brand-mist">Φωτογραφικά στιγμιότυπα</p>
            <h3 class="text-xl font-semibold text-brand-rocky heading-font">Τελευταίες λήψεις από την παρέα</h3>
          </div>
          <div class="flex gap-2">
            <button
              type="button"
              class="inline-flex h-12 w-12 items-center justify-center rounded-full border border-brand-river/30 text-brand-mist hover:text-brand-terracotta hover:border-brand-terracotta transition"
              aria-label="Προηγούμενη φωτογραφία"
              data-gallery-prev
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 6 9 12l6 6" />
              </svg>
            </button>
            <button
              type="button"
              class="inline-flex h-12 w-12 items-center justify-center rounded-full border border-brand-river/30 text-brand-mist hover:text-brand-terracotta hover:border-brand-terracotta transition"
              aria-label="Επόμενη φωτογραφία"
              data-gallery-next
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="m9 6 6 6-6 6" />
              </svg>
            </button>
          </div>
        </div>
        <div class="relative">
          <div class="flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory" data-gallery-track>
            {heroGallery.map((photo) => (
              <figure
                class="min-w-[75%] sm:min-w-[320px] lg:min-w-[360px] snap-start shrink-0"
                data-gallery-card
              >
                <div class="relative h-56 sm:h-64 rounded-3xl overflow-hidden">
                  <img src={photo.src} alt={photo.alt} class="h-full w-full object-cover" loading="lazy" />
                  <div class="absolute inset-0 bg-gradient-to-t from-brand-river/70 via-transparent to-transparent" />
                  <figcaption class="absolute bottom-4 left-4 text-brand-cloud text-sm font-semibold">
                    {photo.caption}
                  </figcaption>
                </div>
              </figure>
            ))}
          </div>
          <div class="pointer-events-none absolute inset-y-0 left-0 w-16 bg-gradient-to-r from-brand-river/50 via-brand-river/0 to-transparent hidden sm:block" />
          <div class="pointer-events-none absolute inset-y-0 right-0 w-16 bg-gradient-to-l from-brand-river/50 via-brand-river/0 to-transparent hidden sm:block" />
        </div>
      </div>
    </div>
  </section>

  <section class="section-padding" id="upcoming-trips">
    <SectionHeader eyebrow="Σχεδιασμός" title="Επερχόμενες περιπέτειες" subtitle="Μικρές ομάδες, άρτια οργάνωση και υποστήριξη προπονητών" />
    <div class="grid gap-6 lg:grid-cols-2">
      {upcomingTrips.map((trip) => (
        <TripCard trip={trip} />
      ))}
    </div>
    <div class="mt-10 text-center">
      <a
        href="/trips"
        class="inline-flex items-center gap-2 rounded-full border border-brand-cloud/50 px-6 py-3 text-sm font-semibold text-brand-cloud hover:border-brand-terracotta hover:text-brand-terracotta"
      >
        Όλες οι εξορμήσεις
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14m-6-6 6 6-6 6" />
        </svg>
      </a>
    </div>
  </section>

  <section class="section-padding">
    <div class="grid gap-10 lg:grid-cols-[1.1fr,0.9fr] items-center">
      <div>
        <SectionHeader eyebrow="Ταυτότητα" title="Ρίζες στην υπευθυνότητα" subtitle="Από το 1974 υπερασπιζόμαστε την ασφάλεια, το άγριο χιόνι και τις φιλίες ζωής." />
        <div class="glass-panel p-8 space-y-4 text-brand-mist bg-brand-river/5">
          <p>
            Από τα εργαστήρια της Τετάρτης μέχρι τις εβδομαδιαίες εκστρατείες σε παγετώνες, πιστεύουμε ότι η
            κοινή γνώση κρατά τα βουνά προσβάσιμα και ασφαλή. Οι αρχηγοί εξορμήσεων αξιολογούνται κάθε χρόνο και
            υποστηρίζονται από διοίκηση που δίνει προτεραιότητα σε υποτροφίες, νεανικά προγράμματα και συνεργασίες
            προστασίας γης.
          </p>
          <p>
            Τα μέλη απολαμβάνουν ανανεώσεις γνώσεων χιονοστιβάδων, κύκλους mentoring, εκπτώσεις σε ορειβατικά
            καταφύγια και ζωντανή κοινότητα συνομιλιών με ενημέρωση σε πραγματικό χρόνο.
          </p>
          <a href="/history" class="inline-flex items-center gap-2 text-brand-pine font-semibold">
            Δες όλη την ιστορία
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14m-6-6 6 6-6 6" />
            </svg>
          </a>
        </div>
      </div>
      <div class="grid gap-6">
        {features.map((feature) => (
          <div class="glass-panel p-6 flex items-start gap-4 transition hover:-translate-y-1 bg-brand-cloud/95">
            <div class="h-12 w-12 rounded-2xl bg-brand-cloud flex items-center justify-center text-brand-pine shadow-inner">
              {feature.icon === 'shield' && (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 3 4.5 6v6c0 5.25 3.75 9.75 7.5 10.5 3.75-.75 7.5-5.25 7.5-10.5V6L12 3Z" />
                </svg>
              )}
              {feature.icon === 'seasons' && (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="m12 6 3-3m-3 3-3-3m3 3V3m3 18 3-3m-3 3-3-3m3 3v-3m6-3-3-3m3 3-3 3m3-3h-3M6 12l-3-3m3 3-3 3m3-3H3" />
                </svg>
              )}
              {feature.icon === 'compass' && (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm2.25-9.75-2 4.5-1.5-1.5-1.5-1.5 4.5-1.5Z" />
                </svg>
              )}
              {feature.icon === 'community' && (
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm12 0a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM6 21v-3a3 3 0 0 1 3-3h0" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M18 21v-3a3 3 0 0 0-3-3h-6" />
                </svg>
              )}
            </div>
            <div>
              <h3 class="text-xl font-semibold text-brand-rocky heading-font">{feature.title}</h3>
              <p class="text-brand-mist text-sm mt-2">{feature.body}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="section-padding">
    <SectionHeader eyebrow="Αναφορές" title="Πρόσφατες αναφορές εξορμήσεων" subtitle="Στιγμές από κορυφές και γραμμές σκι" />
    <div class="grid gap-6 md:grid-cols-3">
      {latestReports.map((report) => (
        <div class="glass-panel p-6 flex flex-col gap-3 hover:-translate-y-1 transition bg-brand-river/5">
          <p class="text-sm text-brand-mist">{new Date(report.startDate).toLocaleDateString('el-GR')}</p>
          <h3 class="text-xl font-semibold text-brand-rocky">{report.title}</h3>
          <p class="text-brand-mist text-sm">{report.shortDescription}</p>
          <a href="/trips" class="text-sm font-semibold text-brand-pine">Διάβασε την αναφορά →</a>
        </div>
      ))}
    </div>
  </section>

  <script>
    (() => {
      const track = document.querySelector('[data-gallery-track]');
      if (!track) return;
      const prevButton = document.querySelector('[data-gallery-prev]');
      const nextButton = document.querySelector('[data-gallery-next]');

      const getStep = () => {
        const card = track.querySelector('[data-gallery-card]');
        const gap = 16; // matches gap-4
        return card ? card.clientWidth + gap : 320;
      };

      prevButton?.addEventListener('click', () => {
        track.scrollBy({ left: -getStep(), behavior: 'smooth' });
      });

      nextButton?.addEventListener('click', () => {
        track.scrollBy({ left: getStep(), behavior: 'smooth' });
      });
    })();
  </script>
</BaseLayout>
